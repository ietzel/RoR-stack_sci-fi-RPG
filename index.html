<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Sci-Fi RPG Sim</title>
    <script src="p5.min.js"></script>
    <style>
      body {
        padding: 20px;
      }
    </style>
  </head>
  <body>
      <script>
        var organisms = [[]];
        var industries = [
          ["Agriculture, Forestry, Fishing & Hunting", "Construction", "Mining", "Utilities"],
          ["Accommodation & Food Services", "Real Estate & Rental & Leasing", "Retail Trade", "Wholesale Trade"],
          ["Administration, Business Support & Waste Management Services", "Healthcare & Social Assistance", "Manufacturing", "Transportation & Warehousing"],
          ["Arts, Entertainment & Recreation", "Educational Services", "Finance & Insurance", "Professional, Scientific & Technical Services"]        
        ];
        var BFCs = ["Production", "R & D", "Management", "Purchasing", "Revenue"];
        organisms[0][0] = new organism("", 10, 10, 10, 10);
        for(var j = 0; j < 1; j++) {
            organisms[1][j] = new organism("", 10, 10, 10, 10);  
        }
        class organism {
          constructor(name, offense, agility, defense, mental) {
            this.name = name;
            this.offense = offense;
            this.agility = agility;
            this.defense = defense;
            this.mental = mental;
            calculate_level();
          }
          calculate_level() {
            this.level = Math.floor(((this.name, this.offense, this.agility, this.defense, this.mental)-40)/16);
          }
        }
        function damage(stat, mental, target, ranged) {
            accuracystat = getModOfStat(stat);
            dexpenalty = 0;
            crouch_mod = 0;
            t_crouch_mod = 0;
            t_cover_mod = 0;
            knowledgeable = false;
            frightened_mod = 0;
            if(mental >= 30) {
                knowledgeable = true;
            }
            if(target.mental<=mental) {
                frightened_mod = floor((target.mental-mental)/-10)-1;
            }
            if(this.crouching <= -1) {
                crouch_mod = -2;
            }
            if(target.crouching == -1) {
                crouch_mod = -2;
            } else if(target.crouching == -2) {
                crouch_mod = -2;
                cover_mod = -2;
            }
            if((this.sped+this.ment+frightened_mod)>=(this.ofns*2)) {
                if((this.ment>target.ment) && (this.sped>target.ment)) {
                    dexpenalty = target.sped;
                }
            } else {
                if(this.ofns+frightened_mod>target.ment) {
                    dexpenalty = target.sped;
                }
            }
            if(!ranged) {
                if(getDist(this.x, this.y, this.z, target.x, target.y, target.z) <= 8*1.5) {
                    if((accuracystat-crouch_mod+frightened_mod+10) >= (getModOfStat(target.sped)-dexpenalty+t_crouch_mod)) {
                        if(((accuracystat*2)+frightened_mod) >= getModOfStat(target.dfse)) {
                            characters = splice([indexOf(target), 1]);
                        }
                    } else {
                        if(((accuracystat-cover_mod)+frightened_mod) >= (getModOfStat(target.sped)-dexpenalty+t_crouch_mod)) {
                            if((accuracystat+frightened_mod) >= getModOfStat(target.dfse)) {
                                characters = splice([indexOf(target), 1]);
                            }
                        }
                    }
                }
            } else if(getDist(this.x, this.y, this.z, target.x, target.y, target.z) <= 8*6) {
                if((accuracystat-crouch_mod+frightened_mod+10) >= (getModOfStat(target.sped)-dexpenalty+(t_crouch_mod*-1))) {
                    if(((accuracystat*2)+frightened_mod) >= getModOfStat(target.dfse)) {
                        characters = splice([indexOf(target), 1]);
                    }
                } else {
                    if((accuracystat-+frightened_modcover_mod) >= (getModOfStat(target.sped)-dexpenalty+(t_crouch_mod*-1))) {
                        if((accuracystat+frightened_mod) >= getModOfStat(target.dfse)) {
                            characters = splice([indexOf(target), 1]);
                        }
                    }
                }
            }
        }
        
        function keyPressed() {
            if (keyCode === LEFT_ARROW) {
            	x_coor -= 50;
            } else if (keyCode === RIGHT_ARROW) {
            	x_coor += 50;
            } else if (keyCode === DOWN_ARROW) {
            	y_coor -= 50;
            	characters[0][0].crouching = true;
            } else if (keyCode === UP_ARROW) {
            	y_coor += 50;
            	characters[0][0].crouching = false;
            }
        }

        let x_coor = 0;
        let y_coor = 0;
        let map = null;
        let noiseScale = 1/128;
        let ocean = "#008dc4";
        let shore = "#00a9cc";
        let sand = "#eecda3";
        let grass = "#7ec850";
        let stone = "#676767";
        let snow = "#fffafa";
        
        
        function setup() {
          createCanvas(512, 256);
          noStroke();
          background(0);
          noiseDetail(5, 0.5);
          makeMap();
          drawMap();
        }
        
        
        function makeMap() {
          map = [];
          for(let i = 0; i < width; i++) {
            map[i] = [];
            for(let j = 0; j < height; j++) {
              map[i][j] = pickColor(i, j);
            }
          }
        }
        
        function pickColor(i, j) {
          let h = noise((i)*noiseScale, (j)*noiseScale);
          let c = "#facade";
          
          if(h < 0.2) {
            c = ocean;
          } else if(h < 0.3) {
            if(random() > pow(h-0.2, 2)*100) {
              c = ocean;
            } else {
              c = shore;
            }
          } else if(h < 0.4) {
            if(random() > pow(h-0.3, 2)*100) {
              c = shore;
            } else {
              c = sand;
            }
          } else if(h < 0.5) {
            if(random() > pow(h-0.4, 2)*100) {
              c = sand;
            } else {
              c = grass;
            }
          } else if(h < 0.6) {
            if(random() > pow(h-0.5, 2)*100) {
              c = grass;
            } else {
              c = stone;
            }
          } else if (h < 0.7) {
            if(random() > pow(h-0.6, 2)*100) {
              c = stone;
            } else {
              c = snow;
            }
           } else {
            c = snow;
          }
          
          return color(c);
        }
        
        function drawMap() {
          for(let i = 0; i < width; i++) {
             for(let j = 0; j < height; j++) {
              set(i, j, map[i][j])
            }
          }
          updatePixels();
        }        
        
    </script>
  
    <h1><a href="https://docs.google.com/document/d/1UnQN5FBOXWiEOR3lkoWNMFROX0AjwMuNREEij2Xrdvo/edit">Campaign</a> tips for character creation</h1>
    <ul>  
      <label><h3>Offense (military)</h3></label>
      <li>Athletics (climb, force open, grapple, high jump, long jump, reposition, shove, swim, trip; disarm)</li>
      <li>Bonuses for Melee Attack/Damage Rolls: equal to mod</li>
    </ul>
    <ul>  
      <label><h3>Speed (nonprofit)</h3></label>
      <li>Acrobatics (balance, tumble through; fly maneuver, squeeze), Piloting, Stealth (conceal object, hide, sneak), Thievery (palm object, steal; disable device, pick lock)</li>
      <li>Base Speed: 20 ft/s + (ability score * 1.125) ft/s [assuming rounds are shortened to 4 seconds]</li>
    </ul>
    <ul>  
      <label><h3>Defense (government)</h3></label>
      <li>n/a</li>
      <li>HP: hp/level equal to mod.</li>
    </ul>
    <ul>  
      <label><h3>Mental (business)</h3></label>
      <li>Arcana (recall knowledge; borrow an arcane spell, decipher writing, identify magic, learn a spell), Computers, Crafting (recall knowledge, repair; craft, earn income, identify alchemy), Deception (create diversion, impersonate, lie; feint), Diplomacy (gather information, make impression, request), Intimidate (coerce, demoralize), Lore (recall knowledge; earn income), Medicine (first aid; disease, poison, wounds), Nature (command animal, recall knowledge; identify magic, learn a spell), Occultism (recall knowledge; decipher writing, identify magic, learn a spell), Survival (sense direction, subsist; cover tracks, track), Religion (recall knowledge; decipher writing, identify magic, learn a spell), Society (recall knowledge, subsist; create forgery)</li>
      <li>n/a</li>
    </ul>
    <h2>Setting summary:</h2>
    <p>Heavily inspired by star wars. Involves a mysterious crash landing in which the members of the ship awoke from carbonite not knowing what planet they inhabit currently or previously.</p>
    <p>The AI which they learned was controlling the ship instructed them to set up a shield until they were sufficiently settled to explore the intruiging planet.</p>
    <p>After some centuries of incubation, some members of the "city" were selected to go beyond the shield barrier to explore the world to the best of their capabilities.</p>
    <table>
      <tr>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
      </tr>
      <tr>
        <td>Agriculture, Forestry, Fishing & Hunting</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
        <td>Construction</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
        <td>Mining</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
        <td>Utilities</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
      </tr>
      <tr>
        <td>Accommodation & Food Services</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
        <td>Real Estate & Rental & Leasing</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
        <td>Retail Trade</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
        <td>Wholesale Trade</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
      </tr>
      <tr>
        <td>Administration, Business Support & Waste Management Services</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
        <td>Healthcare & Social Assistance</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
        <td>Manufacturing</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
        <td>Transportation & Warehousing</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
      </tr>
      <tr>
        <td>Arts, Entertainment & Recreation</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
        <td>Educational Services</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
        <td>Finance & Insurance</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
        <td>Professional, Scientific & Technical Services</td>
        <td><button>Prepare/Build/Employ</button></td>
        <td></td>
      </tr>
    </table>
  </body>
</html>
